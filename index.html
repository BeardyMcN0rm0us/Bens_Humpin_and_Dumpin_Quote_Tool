<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ben’s Humpin’ & Dumpin’ — Instant Quote</title>
<meta name="theme-color" content="#000000" />
<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" sizes="192x192" href="icon-192.png">
<link rel="icon" sizes="512x512" href="icon-512.png">
<style>
  :root{--bg:#000;--panel:#0f0f0f;--ink:#fff;--muted:#b7b7b7;--brand:#f4a261;--brand2:#e76f51;--ok:#25D366;--line:#1e1e1e}
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
  .wrap{max-width:720px;margin:0 auto;padding:18px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0}
  header{display:flex;flex-direction:column;align-items:center;gap:10px}
  header img{width:110px;height:110px;border-radius:20px;border:1px solid var(--line);object-fit:cover;background:#000}
  h1{margin:4px 0 2px;text-align:center;font-size:1.45rem;color:var(--brand)}
  .sub{color:var(--muted);text-align:center}
  .build{color:#6f6f6f;text-align:center;font-size:.82rem;margin-top:6px}
  label{display:block;margin:12px 0 6px;color:var(--muted)}
  input,select,textarea{width:100%;padding:14px;border-radius:12px;border:1px solid var(--line);background:#111;color:#fff;outline:none;font-size:1.05rem}
  textarea{min-height:96px}
  .btn{width:100%;padding:14px;border:none;border-radius:12px;font-weight:800;cursor:pointer;font-size:1.05rem}
  .btn.primary{background:linear-gradient(135deg,#29d980,#25D366);color:#0b1b12}
  .btn.secondary{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#1b0b08}
  .btn.small{padding:8px 10px;font-size:.9rem}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .grid3{display:grid;grid-template-columns:2fr 1fr 1fr;gap:10px}
  @media (max-width:560px){.grid2{grid-template-columns:1fr}.grid3{grid-template-columns:1fr 1fr}}
  .hidden,[hidden]{display:none!important}
  .hint{font-size:.9rem;color:var(--muted);white-space:pre-wrap}
  .total{font-weight:900;font-size:1.6rem;text-align:center;margin-top:8px;color:var(--brand);opacity:0;transition:opacity .3s}
  .total.show{opacity:1}
  .list{margin-top:8px;border-top:1px solid var(--line)}
  .row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--line);gap:10px}
  .row .meta{flex:1}
  .row .qty{display:flex;align-items:center;gap:6px}
  .row input[type="number"]{width:84px}

  /* ---- Help overlay (CSS-only, no JS) ---- */
  #helpToggle{position:absolute;opacity:0;pointer-events:none}
  .helpFab{
    position:fixed; right:14px; bottom:14px; z-index:9000;
    background:linear-gradient(135deg,#29d980,#25D366); color:#0b1b12;
    border-radius:999px; padding:12px 16px; font-weight:900; border:1px solid #0c4024;
    box-shadow:0 8px 24px rgba(0,0,0,.35); cursor:pointer; user-select:none;
  }
  .helpOverlay{
    position:fixed; inset:0; background:rgba(0,0,0,.85); z-index:9500;
    display:none; align-items:center; justify-content:center; padding:20px;
  }
  #helpToggle:checked ~ .helpOverlay{display:flex}
  .helpPanel{
    width:min(900px,96vw); max-height:86vh; overflow:auto;
    background:#0e0e0e; border:1px solid #1f1f1f; border-radius:20px; padding:18px 16px 24px;
    color:#f5f5f5; font-size:1.12rem; line-height:1.55;
  }
  .helpPanel h2{margin:6px 0 6px; font-size:1.4rem; color:#ffd49e}
  .helpPanel h3{margin:14px 0 8px; font-size:1.2rem; color:#f4a261}
  .helpPanel ol{margin:0 0 12px 18px}
  .helpClose{
    position:absolute; top:14px; right:16px; z-index:9600;
    background:#1b1b1b; color:#fff; border:1px solid #333;
    border-radius:12px; padding:8px 12px; font-weight:900; cursor:pointer;
  }
  .pill{display:inline-block;background:#181818;border:1px solid #2c2c2c;border-radius:999px;padding:3px 10px;margin:0 6px 0 0;color:#bdbdbd;font-size:.95rem}
  .muted{color:#b7b7b7;font-size:1rem}
</style>
</head>
<body>
<div class="wrap">
  <header class="card">
    <img src="icon-192.png" alt="Logo">
    <h1>Instant Quote</h1>
    <div class="sub">Fast estimate. Final price confirmed after photos & access check.</div>
    <div class="build" id="buildTag">Build r318</div>
  </header>

  <div class="card">
    <label for="jobType" style="margin:0;color:#fff">Job Type</label>
    <select id="jobType">
      <option value="" selected disabled hidden>Choose a job type…</option>
      <option value="tip">Tip Run</option>
      <option value="move">House Move</option>
      <option value="fb">Facebook Marketplace Pickup/Drop-off</option>
      <option value="shop">Emergency Shop Run</option>
      <option value="student">Student Relocation (to/from uni)</option>
      <option value="ikea">IKEA Collect / Collect & Build</option>
      <option value="business">Business Enquiries / Barter Deals</option>
      <option value="other">Other (Tell me what you need)</option>
    </select>

    <!-- IKEA service mode -->
    <div id="ikeaModeWrap" class="hidden" hidden>
      <label for="ikeaMode">IKEA service</label>
      <select id="ikeaMode">
        <option value="collect" selected>Collect Only</option>
        <option value="collectBuild">Collect & Build</option>
      </select>
    </div>

    <!-- IKEA store -->
    <div id="ikeaStoreWrap" class="hidden" hidden>
      <label for="ikeaStore">IKEA store</label>
      <select id="ikeaStore">
        <option value="" selected disabled>Select IKEA store…</option>
        <option value="Geldered Close, Bletchley, Milton Keynes">IKEA Milton Keynes</option>
        <option value="Boongate, Peterborough">IKEA Peterborough Click & Collect</option>
        <option value="Glover Dr, London N18 3HF">IKEA Tottenham</option>
        <option value="Lakeside Retail Park, Thurrock RM20 3WJ">IKEA Lakeside</option>
        <option value="2 Drury Way, London NW10 0TH">IKEA Wembley</option>
        <option value="Sweet Briar Retail Park, Norwich">IKEA Norwich Order & Collection Point</option>
        <option value="55-57 Bugsby’s Way, London SE10 0QJ">IKEA Greenwich</option>
      </select>
      <div class="hint">Selecting a store sets the collection address.</div>
    </div>

    <!-- IKEA Items "basket" (only for Collect & Build) -->
    <div id="ikeaItemsWrap" class="hidden" hidden>
      <label>Assembly items</label>
      <div class="grid3">
        <select id="ikeaItemSel">
          <option value="" selected>(pick an item…)</option>
          <!-- value format: minutes|Display Name -->
          <option value="90|MALM Chest (6‑drawer)">MALM Chest (6‑drawer) — ~90 min</option>
          <option value="70|MALM Chest (4‑drawer)">MALM Chest (4‑drawer) — ~70 min</option>
          <option value="60|MALM Chest (3‑drawer)">MALM Chest (3‑drawer) — ~60 min</option>
          <option value="90|MALM Bed Frame (double)">MALM Bed Frame (double) — ~90 min</option>
          <option value="110|MALM Bed (double) w/ storage)">MALM Bed (double) w/ storage — ~110 min</option>
          <option value="30|MALM Bedside Table">MALM Bedside Table — ~30 min</option>
          <option value="120|PAX Wardrobe (2‑door basic)">PAX Wardrobe (2‑door basic) — ~120 min</option>
          <option value="150|PAX Wardrobe (3‑door basic)">PAX Wardrobe (3‑door basic) — ~150 min</option>
          <option value="140|PAX Wardrobe (2‑door sliding)">PAX Wardrobe (2‑door sliding) — ~140 min</option>
          <option value="160|PAX 2‑door + KOMPLEMENT drawers">PAX 2‑door + KOMPLEMENT drawers — ~160 min</option>
          <option value="45|BILLY Bookcase 80×202">BILLY Bookcase 80×202 — ~45 min</option>
          <option value="35|BILLY Bookcase 40×202">BILLY Bookcase 40×202 — ~35 min</option>
          <option value="60|BILLY + OXBERG doors">BILLY + OXBERG doors — ~60 min</option>
          <option value="70|BILLY Corner Bookcase">BILLY Corner Bookcase — ~70 min</option>
          <option value="30|KALLAX 2×2">KALLAX 2×2 — ~30 min</option>
          <option value="50|KALLAX 2×4">KALLAX 2×4 — ~50 min</option>
          <option value="35|KALLAX 1×4">KALLAX 1×4 — ~35 min</option>
          <option value="75|KALLAX 5×5">KALLAX 5×5 — ~75 min</option>
          <option value="110|HEMNES Chest (8‑drawer)">HEMNES Chest (8‑drawer) — ~110 min</option>
          <option value="95|HEMNES Chest (6‑drawer)">HEMNES Chest (6‑drawer) — ~95 min</option>
          <option value="60|HEMNES TV bench">HEMNES TV bench — ~60 min</option>
          <option value="120|HEMNES Day‑bed + drawers">HEMNES Day‑bed + drawers — ~120 min</option>
          <option value="95|BRIMNES Wardrobe (3‑door)">BRIMNES Wardrobe (3‑door) — ~95 min</option>
          <option value="80|BRIMNES Wardrobe (2‑door)">BRIMNES Wardrobe (2‑door) — ~80 min</option>
          <option value="100|BRIMNES Bed w/ storage (double)">BRIMNES Bed w/ storage (double) — ~100 min</option>
          <option value="70|BRIMNES Chest (4‑drawer)">BRIMNES Chest (4‑drawer) — ~70 min</option>
          <option value="80|SONGESAND Bed (double)">SONGESAND Bed (double) — ~80 min</option>
          <option value="90|SONGESAND Wardrobe (2‑door)">SONGESAND Wardrobe (2‑door) — ~90 min</option>
          <option value="100|LIATORP TV Unit">LIATORP TV Unit — ~100 min</option>
          <option value="90|LIATORP Bookcase">LIATORP Bookcase — ~90 min</option>
          <option value="25|LACK Coffee Table">LACK Coffee Table — ~25 min</option>
          <option value="35|LACK TV Bench">LACK TV Bench — ~35 min</option>
          <option value="20|LACK Side Table">LACK Side Table — ~20 min</option>
          <option value="85|PLATSA Wardrobe (simple)">PLATSA Wardrobe (simple) — ~85 min</option>
          <option value="90|PLATSA Frame + 2 doors">PLATSA Frame + 2 doors — ~90 min</option>
          <option value="45|IVAR Shelving Unit (basic)">IVAR Shelving Unit (basic) — ~45 min</option>
          <option value="60|BESTÅ TV bench (120 cm)">BESTÅ TV bench (120 cm) — ~60 min</option>
          <option value="75|BESTÅ TV bench (180 cm)">BESTÅ TV bench (180 cm) — ~75 min</option>
          <option value="90|BESTÅ frame + doors (combo)">BESTÅ frame + doors (combo) — ~90 min</option>
          <option value="35|POÄNG Armchair">POÄNG Armchair — ~35 min</option>
          <option value="20|POÄNG Footstool">POÄNG Footstool — ~20 min</option>
          <option value="90|NORDLI Chest (6‑drawer)">NORDLI Chest (6‑drawer) — ~90 min</option>
          <option value="110|NORDLI Chest (8‑drawer)">NORDLI Chest (8‑drawer) — ~110 min</option>
          <option value="60|TARVA Bed Frame (double)">TARVA Bed Frame (double) — ~60 min</option>
          <option value="50|FJÄLLBO TV bench">FJÄLLBO TV bench — ~50 min</option>
          <option value="55|HEMNES Shoe cabinet">HEMNES Shoe cabinet — ~55 min</option>
          <option value="50|MICKE Desk">MICKE Desk — ~50 min</option>
          <option value="40|ALEX Drawer unit">ALEX Drawer unit — ~40 min</option>
          <option value="50|PAX Sliding door pair (add‑on)">PAX Sliding door pair (add‑on) — ~50 min</option>
          <option value="45|KOMPLEMENT Drawer set (×4)">KOMPLEMENT Drawer set (×4) — ~45 min</option>
        </select>
        <input id="ikeaQtyAdd" type="number" min="1" step="1" value="1" />
        <button id="ikeaAddBtn" class="btn secondary small" type="button">Add</button>
      </div>

      <div id="ikeaList" class="list"></div>
      <div class="hint" id="ikeaTimeHint"></div>
    </div>

    <!-- Legacy qty (kept for fallback if basket unused) -->
    <div id="ikeaQtyWrap" class="hidden" hidden>
      <label for="ikeaQty">How many items to build? (legacy)</label>
      <input id="ikeaQty" type="number" min="1" step="1" value="1">
    </div>

    <!-- Addresses -->
    <div id="pickupField" class="hidden" hidden>
      <label for="addrPickup">Collection address</label>
      <input id="addrPickup" type="text" placeholder="Start typing…" autocomplete="street-address">
    </div>
    <div id="addrDropWrap" class="hidden" hidden>
      <label for="addrDrop">Delivery address / destination</label>
      <input id="addrDrop" type="text" placeholder="Start typing…" autocomplete="street-address">
    </div>

    <!-- Shop timing -->
    <div id="shopTimeWrap" class="hidden" hidden>
      <label for="shopTime">Run time (for shop runs)</label>
      <select id="shopTime">
        <option value="before22" selected>Before 10pm</option>
        <option value="after22">After 10pm</option>
      </select>
    </div>

    <!-- Team & stairs -->
    <div id="twoManWrap" class="hidden" hidden>
      <label for="twoMan">Two‑person team?</label>
      <select id="twoMan"><option value="no">No</option><option value="yes">Yes</option></select>
    </div>
    <div id="stairsWrap" class="grid2 hidden" hidden>
      <div>
        <label for="stairsPickup">Stairs at pickup (floors)</label>
        <input id="stairsPickup" type="number" min="0" step="1" value="0">
      </div>
      <div>
        <label for="stairsDrop">Stairs at drop‑off (floors)</label>
        <input id="stairsDrop" type="number" min="0" step="1" value="0">
      </div>
    </div>

    <!-- Waste (Tip run) -->
    <div id="wasteWrap" class="hidden" hidden>
      <label for="wasteType">Waste type (Tip runs)</label>
      <select id="wasteType"></select>
      <div class="hint">We use the minimum disposal fee (25% of the published £/tonne).</div>
    </div>

    <!-- Description -->
    <div id="descWrap" class="hidden" hidden>
      <label for="jobDesc">What is it? (Describe the job)</label>
      <textarea id="jobDesc" placeholder="e.g., sofa + access notes… "></textarea>
    </div>

    <button id="btnCalc" class="btn secondary" type="button">Calculate Quote</button>
    <div id="routeHint" class="hint">Choose a job type to start.</div>
  </div>

  <div class="card">
    <div id="quoteId" class="hint">Quote ID — (after send)</div>
    <div id="breakdown" class="hint" style="margin-top:6px"></div>
    <div id="total" class="total">Estimated: £0–£0</div>
  </div>

  <div class="card">
    <button id="btnWhatsApp" class="btn primary hidden" hidden type="button">Send to WhatsApp</button>
    <div class="hint" style="margin-top:8px">WhatsApp opens with your details and Ben’s number prefilled.</div>
  </div>
</div>

<!-- ---- HELP OVERLAY (no JS) ---- -->
<input type="checkbox" id="helpToggle" />
<label class="helpFab" for="helpToggle">Help</label>
<div class="helpOverlay">
  <label class="helpClose" for="helpToggle">Close ✕</label>
  <div class="helpPanel">
    <h2>How to get an instant estimate</h2>
    <ol>
      <li><strong>Pick a job type</strong> from the dropdown.</li>
      <li><strong>Enter addresses.</strong> Start typing and choose from the list.</li>
      <li><strong>Fill any extras</strong> (stairs, two‑person team, waste type, IKEA items).</li>
      <li>Tap <strong>Calculate Quote</strong>.</li>
      <li>Review the breakdown. It shows <span class="pill">Total journey</span> and <span class="pill">Charged mileage</span>.</li>
      <li>Tap <strong>Send to WhatsApp</strong> to message Ben with everything filled in.</li>
    </ol>

    <h3>Job types explained</h3>
    <p><strong>Tip Run</strong> — Collection address → Waterbeach. If the collection is more than 50 miles from Ben’s home, mileage is charged from home. You’ll also see a <em>minimum disposal fee</em> based on waste type.</p>
    <p><strong>House Move / Facebook Pickup / Student Relocation</strong> — Home → Pickup → Delivery (charged one‑way). Add stairs and two‑person team if needed.</p>
    <p><strong>Emergency Shop Run</strong> — Home → Shop → Delivery. Choose <em>Before 10pm</em> or <em>After 10pm</em> for base fee.</p>
    <p><strong>IKEA Collect & Build</strong> — Pick an IKEA store (sets the collection address), then add items to your list with quantities. We’ll estimate build time and price. For <em>Collect Only</em>, skip the item list.</p>
    <p><strong>Business / Barter / Other</strong> — Give a short description so Ben knows what’s needed.</p>

    <h3>What the numbers mean</h3>
    <ul>
      <li><strong>Total journey</strong> — Ben’s full round trip (home → job → home), useful for context.</li>
      <li><strong>Charged mileage</strong> — The miles you’re billed for, using Ben’s rules, e.g. one‑way for most jobs.</li>
      <li><strong>Base</strong> — Standard fee for that job type.</li>
      <li><strong>Mileage</strong> — Charged miles × per‑mile rate.</li>
      <li><strong>Stairs / Two‑person</strong> — Only when relevant.</li>
      <li><strong>Disposal</strong> — For Tip Runs: minimum fee based on waste type.</li>
      <li><strong>IKEA Assembly</strong> — Time‑based at £/hour (shown) or per‑item, depending on Ben’s settings.</li>
      <li><strong>Estimated total</strong> — You’ll see a range (e.g., £80–£100). Final price confirmed after photos/access check.</li>
    </ul>

    <h3>Tips</h3>
    <ul>
      <li>If the address list doesn’t pop up, type the <em>postcode</em> (e.g., “PE15 0SU”).</li>
      <li>For IKEA: choosing a store will automatically fill the collection address.</li>
      <li>If you switch job type and something looks odd, just press <em>Calculate Quote</em> again.</li>
      <li>Ready to book? Use <strong>Send to WhatsApp</strong> — Ben replies fast.</li>
    </ul>

    <p class="muted">This is an estimate. Final price depends on photos, access, and actual load on the day.</p>
  </div>
</div>

<!-- App logic (unchanged) -->
<script src="main.js?v=r317" defer></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=__MAPS_API_KEY__&libraries=places&v=weekly&cbust=r318"></script>
</body>
</html>